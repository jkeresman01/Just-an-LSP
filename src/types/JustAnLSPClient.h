#pragma once

#include "../capabilities/ClientCapabilites.h"
#include "../types/ClientInfo.h"

#include <memory>

namespace justanlsp
{

//////////////////////////////////////////////////////////////
///
/// @class JustAnLSPClient
///
/// @brief Represent the client that connects to JustAnLSP server
///
//////////////////////////////////////////////////////////////
class JustAnLSPClient
{
  public:
    //////////////////////////////////////////////////////////////
    ///
    /// @brief Constructors
    ///
    //////////////////////////////////////////////////////////////
    JustAnLSPClient() = default;
    JustAnLSPClient(const ClientInfo &clientInfo,
                    const std::shared_ptr<ClientCapabilities> &clientCapabilites);

    //////////////////////////////////////////////////////////////
    ///
    /// @brief Registers client capabilities (features supported
    ///        by the editor or tool)
    ///
    /// @param clientCapabilites
    ///
    //////////////////////////////////////////////////////////////
    void registerCapabilites(const std::shared_ptr<ClientCapabilities> &clientCapabilites);

    //////////////////////////////////////////////////////////////
    ///
    /// @brief Saves info about the client (name and version)
    ///
    /// @param clientInfo
    ///
    //////////////////////////////////////////////////////////////
    void saveInfo(const ClientInfo &clientInfo);

    //////////////////////////////////////////////////////////////
    ///
    /// @brief Gets string represenation of client information
    ///
    /// @return clientInfo
    ///
    //////////////////////////////////////////////////////////////
    std::string getInfo() const { return m_clientInfo.toString(); };

  private:
    //////////////////////////////////////////////////////////////
    ///
    /// @brief Client capabilites
    ///
    //////////////////////////////////////////////////////////////
    std::shared_ptr<ClientCapabilities> m_clientCapabilities = std::make_shared<ClientCapabilities>();

    //////////////////////////////////////////////////////////////
    ///
    /// @brief Client information (name and version)
    ///
    //////////////////////////////////////////////////////////////
    ClientInfo m_clientInfo;
};
} // namespace justanlsp
